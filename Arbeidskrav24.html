<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arbeidskrav PGR102</title>
    <link rel="stylesheet" href="arbeidskrav.css" />
  </head>
  <!-- HTML KODEN TRENGER DU IKKE RØRE FOR Å LØSE OPPGAVENE. DU SKAL KUN KODE I SCRIPT -->

  <body>
    <div class="main-container">
      <div class="hero-health-containers">
        <div class="healthbar-container">
          <!-- healer-health sin vidde må forandres for å endre lifebar -->
          <div id="healer-health" class="healthbar"></div>
          <div class="text-container">
            <!-- Disse må forandres på for å endre på navn og HP -->
            <p id="healer-name-txt">Healerens navn</p>
            <p id="healer-health-txt">400 / 400 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- archer-health sin vidde må forandres for å endre lifebar -->
          <div id="archer-health" class="healthbar"></div>
          <div class="text-container">
            <!-- Disse må forandres på for å endre på navn og HP -->
            <p id="archer-name-txt">Archerens navn</p>
            <p id="archer-health-txt">600 / 600 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- warrior-health sin vidde må forandres for å endre lifebar -->
          <div id="warrior-health" class="healthbar"></div>
          <div class="text-container">
            <!-- Disse må forandres på for å endre på navn og HP -->
            <p id="warrior-name-txt">Warriorens navn</p>
            <p id="warrior-health-txt">800 / 800 HP</p>
          </div>
        </div>
      </div>

      <!-- Healthbar til fienden -->
      <div class="dragon-health-container">
        <div class="healthbar-container">
          <!-- dragon-health sin vidde må forandres for å endre lifebar -->
          <div id="dragon-health" class="healthbar"></div>
          <div class="text-container">
            <!-- Disse må forandres på for å endre på navn og HP -->
            <p id="dragon-name-txt">Dragens navn</p>
            <div id="dragon-health-txt" class="text-container">
              2000 / 2000 HP
            </div>
          </div>
        </div>
      </div>

      <!-- Bildecontainere for heroene. Disse bilde-containerne skal kunne trykkes på  -->
      <div id="healer" class="img-container">
        <img class="hero" src="assets/healer.png" />
      </div>
      <div id="archer" class="img-container">
        <img class="hero" src="assets/archer.png" />
      </div>
      <div id="warrior" class="img-container">
        <img class="hero" src="assets\warrior.png" />
      </div>

      <!-- Bildecontainer for fienden -->
      <div id="dragon" class="img-container">
        <img id="dragon-img" src="assets\dragon.png" />
      </div>
    </div>
    <script>
      //Denne JS-koden er laget klar for deg. Den trenger du ikke endre på. :-)
      //Stats for heroes: Du må ikke bruke alle stats videre i programmet ditt hvis du ikke ser det nødvendig.
      //Husk at for å hente ut noe fra et objekt som er i et array kan vi skrive for eksempel slik: heroesArray[1].name (Ariana Archer)

      let heroesArray = [
        {
          id: 0,
          name: "Henriette Healer",
          currentHP: 400,
          damage: 100,
          alive: true,
        },
        {
          id: 1,
          name: "Ariana archer",
          currentHP: 600,
          damage: 400,
          alive: true,
        },
        {
          id: 2,
          name: "Wyona Warrior",
          maxHP: 800,
          currentHP: 800,
          damage: 400,
          alive: true,
        },
      ];

      let dragonStats = {
        name: "Daar Dragon",
        maxHP: 2000,
        currentHP: 2000,
        damage: 200,
        alive: true,
      };

      //Bildene som skal kunne trykkes på
      const healer = document.getElementById("healer");
      const archer = document.getElementById("archer");
      const warrior = document.getElementById("warrior");

      const dragon = document.getElementById("dragon");

      //Navnene til heltene og dragen som kan oppdateres med riktig navn (tilleggsfunksjonalitet)
      const healerName = document.getElementById("healer-name-txt");
      const archerName = document.getElementById("archer-name-txt");
      const warriorName = document.getElementById("warrior-name-txt");

      const dragonName = document.getElementById("dragon-name-txt");

      //HP-tekstene til heltene som skal kunne oppdatere seg (tilleggsfunksjonalitet)
      const healerHealthTxt = document.getElementById("healer-health-txt");
      const archerHealthTxt = document.getElementById("archer-health-txt");
      const warriorHealthTxt = document.getElementById("warrior-health-txt");

      //HP-teksten til dragen som kan oppdatere seg (tilleggsfunksjonalitet)
      const dragonHealthTxt = document.getElementById("dragon-health-txt");

      //Healthbars som må oppdateres for at grønnfargen skal bli mindre når HP blir mindre (tilleggsfunksjonalitet)
      const healerHealthBar = document.getElementById("healer-health");
      const archerHealthBar = document.getElementById("archer-health");
      const warriorHealthBar = document.getElementById("warrior-health");

      const dragonHealthBar = document.getElementById("dragon-health");


      //Trinn 1!!!!

      //funksjon for healer(:
      healer.onclick = function () {
       const healer = heroesArray[0]; // Velger healer fra arrayet 0 
        dragonStats.currentHP -= healer.damage; // for å redusere dragens hp
        if(dragonStats.currentHP < 0){
        dragonStats.currentHP = 0 //hindrer at vi current hp går i minus
         }
         else if (dragonStats.currentHP === 0) {
        dragonStats.alive = false; //endrer boolsk veriden alive true til false når dragen er dødt. RIP Dragen ):
         }
     // Oppdaterer visningen av dragens helse
    dragonHealthTxt.textContent = `HP: ${dragonStats.currentHP}/${dragonStats.maxHP}`; // Oppdaterer teksten i dragonHealthTxt

    alert(healer.name + " har gjort " + healer.damage + " skade på " + dragonStats.name + " ");
    
    dragonAttack() //kaller funskjonene som jeg har laget lengre ned yooo
    taptStatus()()
    vinneStatus()
    };

      //funksjon for archer aka Ariana Grande(:
      archer.onclick = function(){
      const archer = heroesArray[1]; // Velger healer fra arrayet 1
      dragonStats.currentHP -= archer.damage; // for å redusere dragens hp
      if(dragonStats.currentHP < 0){
        dragonStats.currentHP = 0  //hindrer at vi current hp går i minus
      }
      
      else if (dragonStats.currentHP === 0){
        dragonStats.alive = false
      }
      dragonHealthTxt.textContent = `HP: ${dragonStats.currentHP}/${dragonStats.maxHP}`; // Oppdaterer teksten i dragonHealthTx
      alert(archer.name + " har gjort " + archer.damage + " skade på " + dragonStats.name + " ");
      
      dragonAttack() //kaller funskjonene som jeg har laget lengre ned yooo
      taptStatus()()
      vinneStatus()
    };
    
    //funkjson for wyone warrior (:
      warrior.onclick = function(){
      const warrior = heroesArray[2]; // Velger healer fra arrayet 2
      dragonStats.currentHP -= warrior.damage; // for å redusere dragens hp
      if(dragonStats.currentHP < 0){
        dragonStats.currentHP = 0  //hindrer at vi current hp går i minus
      }
      else if(dragonStats.currentHP === 0){
        dragonStats.alive = false 
      }
      dragonHealthTxt.textContent = `HP: ${dragonStats.currentHP}/${dragonStats.maxHP}`; // Oppdaterer teksten i dragonHealthTx
      alert(warrior.name + " har gjort " + warrior.damage + " skade på " + dragonStats.name + " ");
      
      dragonAttack() //kaller funskjonene som jeg har laget lengre ned yooo
      taptStatus()()
      vinneStatus()
    };

       //Trinn 2!!!!!!!!!!!!! dragen angriper tilbakeee lessgoooooo
      function dragonAttack() {
   
      let aliveHeroes = [];  // Opprett en tom liste for levende helter

   
       for (let i = 0; i < heroesArray.length; i++) { // Bruk for-løkke til å gå gjennom heroarrayet (Tillegsfunskjon)
        if (heroesArray[i].alive) {
            aliveHeroes.push(heroesArray[i]); // Legg til levende helter i listen
        }
         }
        if (aliveHeroes.length === 0) {// Sjekk om det finnes noen levende helter å angripe
        return; // Ingen helter er i live, avslutt funksjonen
             }

       const randomIndex = Math.floor(Math.random() * aliveHeroes.length);/*bruker math floor for å runde til nærmeste tall,
        og math random for å velge en tillfeldig helt*/
       const targetHero = aliveHeroes[randomIndex]; // Velg en tilfeldig levende helt

   
      targetHero.currentHP -= dragonStats.damage  // Dragen angriper den levende helten
       alert(`${dragonStats.name} angrep ${targetHero.name} og gjorde ${dragonStats.damage} skade!`);

          if (targetHero.currentHP <= 0) {
              targetHero.currentHP = 0; //setter currenhp veriden til null for å unngå negative tall!!!!
              targetHero.alive = false; // Sett helten til død
          
        
          if (targetHero.id === 0) healer.remove();// Fjern helten fra nettleseren (Tillegsfunskjon)
           else if (targetHero.id === 1) archer.remove();
           else if (targetHero.id === 2) warrior.remove();
          }

       // Oppdater HP-visningen
        healerHealthTxt.innerHTML = `HP: ${heroesArray[0].currentHP}`;
        archerHealthTxt.innerHTML = `HP: ${heroesArray[1].currentHP}`;
        warriorHealthTxt.innerHTML = `HP: ${heroesArray[2].currentHP}`;

        taptStatus(); //kaller taptfunksjonen
        vinneStatus(); //kaller vinne funksjonen
        
        }

   
    
      function taptStatus(){ //Dette funksjonen gir oss alert når heltene er dødt, her henter jeg array index til heltene.
      if(heroesArray[0].currentHP == 0 && heroesArray[1].currentHP == 0 
          && heroesArray[2].currentHP == 0 && dragonStats.currentHP > 0)
          {
        alert("Spillet er tapt"+ " " + dragonName + " " + "Har vunnet!")
         }
       }
       function vinneStatus() { // Sjekk om dragens HP er 0
         if (dragonStats.currentHP === 0) {
         if (heroesArray[0].currentHP > 0 || heroesArray[1].currentHP > 0 || heroesArray[2].currentHP > 0) { // Sjekk om minst én helt har mer enn 0 HP
         alert("Gratulere! Du har vunnet");
        }
       }
        }

    
    
    </script>
  </body>
</html>
